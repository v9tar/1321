local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

-- إعدادات اللغات
local Languages = {
    AR = {
        Title = "D88 - التحكم الشامل",
        MapControl = "التحكم في المابات",
        DonateLabel = "ادعم التطوير:",
        Donate5 = "تبرع 5 💙",
        Donate10 = "تبرع 10 💎",
        Status = "البينج: %d | الإطارات: %d"
    },
    EN = {
        Title = "D88 - Ultimate Control",
        MapControl = "Map Control",
        DonateLabel = "Support Development:",
        Donate5 = "Donate 5 💙",
        Donate10 = "Donate 10 💎",
        Status = "Ping: %d | FPS: %d"
    }
}

-- اختيار اللغة الأولي
local function ShowLanguageSelector()
    local LangGui = Instance.new("ScreenGui")
    local Main = Instance.new("Frame")
    local Title = Instance.new("TextLabel")
    local ARBtn = Instance.new("TextButton")
    local ENBtn = Instance.new("TextButton")
    
    LangGui.Name = "LanguageSelector"
    LangGui.Parent = game.CoreGui
    
    Main.Size = UDim2.new(0, 300, 0, 200)
    Main.Position = UDim2.new(0.5, -150, 0.5, -100)
    Main.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    Main.Parent = LangGui
    
    -- تصميم الأزرار والواجهة
    local function CreateButton(text, color)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(0, 120, 0, 50)
        btn.BackgroundColor3 = color
        btn.Text = text
        btn.Font = Enum.Font.GothamBold
        btn.TextSize = 16
        btn.TextColor3 = Color3.new(1, 1, 1)
        btn.AutoButtonColor = false
        return btn
    end
    
    ARBtn = CreateButton("العربية 🇸🇦", Color3.fromRGB(0, 100, 255))
    ENBtn = CreateButton("English 🇺🇸", Color3.fromRGB(50, 200, 100))
    
    ARBtn.Position = UDim2.new(0.5, -130, 0.5, -30)
    ENBtn.Position = UDim2.new(0.5, 10, 0.5, -30)
    
    ARBtn.Parent = Main
    ENBtn.Parent = Main
    
    ARBtn.MouseButton1Click:Connect(function()
        LangGui:Destroy()
        return "AR"
    end)
    
    ENBtn.MouseButton1Click:Connect(function()
        LangGui:Destroy()
        return "EN"
    end)
end

-- نافذة التحكم الرئيسية مع التحسينات
local SelectedLang = ShowLanguageSelector() or "EN"
local CurrentLang = Languages[SelectedLang]

local Gui = Instance.new("ScreenGui")
Gui.Name = "D88_Premium_v2"
Gui.Parent = game.CoreGui

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 400, 0, 500)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 25, 35)
MainFrame.BackgroundTransparency = 0.05
MainFrame.Visible = true

-- إضافة تأثيرات بصرية
local Gradient = Instance.new("UIGradient")
Gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 150, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(150, 0, 255))
})
Gradient.Rotation = 45
Gradient.Parent = MainFrame

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 15)
UICorner.Parent = MainFrame

-- زر التبديل الذكي
local ToggleBtn = Instance.new("TextButton")
ToggleBtn.Size = UDim2.new(0, 50, 0, 50)
ToggleBtn.Position = UDim2.new(1, 10, 0.5, -25)
ToggleBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 255))
ToggleBtn.Text = CurrentLang.MapControl
ToggleBtn.Font = Enum.Font.GothamBold
ToggleBtn.TextColor3 = Color3.new(1, 1, 1)

-- نظام تتبع الأداء
local PerformanceLabel = Instance.new("TextLabel")
PerformanceLabel.Size = UDim2.new(1, -20, 0, 30)
PerformanceLabel.Position = UDim2.new(0, 10, 1, -40)
PerformanceLabel.BackgroundTransparency = 1
PerformanceLabel.TextColor3 = Color3.new(1, 1, 1)
PerformanceLabel.Font = Enum.Font.GothamMedium

-- تحديث أداء النظام
local function UpdatePerformance()
    local ping = game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValueString()
    local fps = math.floor(1/RunService.RenderStepped:Wait())
    PerformanceLabel.Text = string.format(CurrentLang.Status, ping, fps)
end

-- تحريك النافذة
local Dragging, DragInput, DragStart
ToggleBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        Dragging = true
        DragStart = input.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                Dragging = false
            end
        end)
    end
end)

ToggleBtn.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        DragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if Dragging and input == DragInput then
        local Delta = input.Position - DragStart
        ToggleBtn.Position = UDim2.new(
            ToggleBtn.Position.X.Scale, 
            ToggleBtn.Position.X.Offset + Delta.X,
            ToggleBtn.Position.Y.Scale, 
            ToggleBtn.Position.Y.Offset + Delta.Y
        )
        MainFrame.Position = UDim2.new(
            MainFrame.Position.X.Scale, 
            MainFrame.Position.X.Offset + Delta.X,
            MainFrame.Position.Y.Scale, 
            MainFrame.Position.Y.Offset + Delta.Y
        )
        DragStart = input.Position
    end
end)

-- التبديل بين فتح/إغلاق القائمة
ToggleBtn.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
    TweenService:Create(ToggleBtn, TweenInfo.new(0.3), {Rotation = MainFrame.Visible and 180 or 0}):Play()
end)

-- تحديث الأداء كل ثانية
while wait(1) do
    UpdatePerformance()
end

-- (أضف بقية عناصر الواجهة وأحداثها هنا كما في السكربت الأصلي)
