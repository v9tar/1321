--[[
  J3OYX1 ELITE TOOLS V5
  The Ultimate All-In-One Solution
--]]

local Player = game:GetService("Players").LocalPlayer
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")

-- ██████  HYPER-OPTIMIZED CORE ██████ --
local GUI = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local ToggleBtn = Instance.new("TextButton")

-- ██████  ELITE GUI DESIGN (BIGGER SIZE) ██████ --
GUI.Name = "EliteToolsV5"
GUI.ResetOnSpawn = false
GUI.DisplayOrder = 9999

MainFrame.Size = UDim2.new(0, 150, 0, 200)
MainFrame.Position = UDim2.new(1, -160, 0.5, -100)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true

ToggleBtn.Size = UDim2.new(0, 35, 0, 35)
ToggleBtn.Position = UDim2.new(1, -40, 0.5, -17.5)
ToggleBtn.Text = "☰"
ToggleBtn.TextSize = 18
ToggleBtn.TextColor3 = Color3.new(1, 1, 1)
ToggleBtn.BackgroundTransparency = 0.9

-- ██████  PERFECT BUTTON SYSTEM ██████ --
local buttons = {
    {Text = "GHOST WORLD", Action = "Ghost", Color = Color3.fromRGB(255, 50, 50)},
    {Text = "ANTI-AFK MODE", Action = "AntiAFK", Color = Color3.fromRGB(50, 255, 50)},
    {Text = "FLY SYSTEM", Action = "Fly", Color = Color3.fromRGB(50, 50, 255)},
    {Text = "DESTROY GUI", Action = "Destroy", Color = Color3.fromRGB(255, 255, 50)}
}

local function CreateButton(index, config)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 130, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, 10 + (index * 45))
    btn.Text = config.Text
    btn.TextColor3 = config.Color
    btn.BackgroundTransparency = 0.8
    btn.TextSize = 12
    btn.Font = Enum.Font.GothamBold
    btn.Visible = false
    btn.Parent = MainFrame
    
    btn.MouseButton1Click:Connect(function()
        HandleAction(config.Action)
    end)
    
    return btn
end

-- ██████  MILITARY-GRADE FUNCTIONS ██████ --
local States = {
    Ghost = false,
    Flying = false,
    AFK = false
}

local Connections = {}

function HandleAction(action)
    if action == "Ghost" then
        States.Ghost = not States.Ghost
        for _, part in pairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Transparency = States.Ghost and 1 or 0
                part.CanCollide = not States.Ghost
            end
        end
    
    elseif action == "AntiAFK" then
        States.AFK = not States.AFK
        if States.AFK then
            Connections.AFK = RunService.Heartbeat:Connect(function()
                pcall(function()
                    game:GetService("ReplicatedStorage").MainEvent:FireServer("TeleportDetect")
                    Player.Character:SetPrimaryPartCFrame(Player.Character.HumanoidRootPart.CFrame)
                end)
            end)
        else
            Connections.AFK:Disconnect()
        end
    
    elseif action == "Fly" then
        States.Flying = not States.Flying
        if States.Flying then
            local bodyGyro = Instance.new("BodyGyro")
            bodyGyro.P = 9e4
            bodyGyro.Parent = Player.Character.HumanoidRootPart
            
            Connections.Fly = RunService.Heartbeat:Connect(function()
                Player.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
                if UIS:IsKeyDown(Enum.KeyCode.Space) then
                    Player.Character.HumanoidRootPart.CFrame += Vector3.new(0, 2, 0)
                end
            end)
        else
            Connections.Fly:Disconnect()
            Player.Character.HumanoidRootPart.BodyGyro:Destroy()
        end
    
    elseif action == "Destroy" then
        for _, conn in pairs(Connections) do
            conn:Disconnect()
        end
        GUI:Destroy()
    end
end

-- ██████  PERFECT TOGGLE SYSTEM ██████ --
local tweenInfo = TweenInfo.new(0.25, Enum.EasingStyle.Exponential)

local function ToggleUI()
    local targetSize = MainFrame.Size == UDim2.new(0,150,0,200) and UDim2.new(0,35,0,35) or UDim2.new(0,150,0,200)
    local targetPos = MainFrame.Size == UDim2.new(0,150,0,200) and UDim2.new(1, -40, 0.5, -17.5) or UDim2.new(1, -160, 0.5, -100)
    
    TweenService:Create(MainFrame, tweenInfo, {
        Size = targetSize,
        Position = targetPos
    }):Play()
    
    for _, btn in pairs(MainFrame:GetChildren()) do
        if btn:IsA("TextButton") then
            btn.Visible = not btn.Visible
        end
    end
end

-- ██████  UNIVERSAL INPUT SYSTEM ██████ --
UIS.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightShift then
        ToggleUI()
    end
end)

-- ██████  FINAL INITIALIZATION ██████ --
for i, btnConfig in ipairs(buttons) do
    CreateButton(i-1, btnConfig)
end

ToggleBtn.MouseButton1Click:Connect(ToggleUI)
MainFrame.Parent = GUI
ToggleBtn.Parent = GUI
GUI.Parent = CoreGui

-- ██████  AUTO-UPDATE CHECKER ██████ --
spawn(function()
    while wait(60) do
        pcall(function()
            -- Add update checking logic here
        end)
    end
end)
